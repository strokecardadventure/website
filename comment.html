<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="manifest" href="manifest.webmanifest"><meta name="theme-color" content="#e11d48">
<link rel="icon" href="assets/icons/pwa-192.png">
<link rel="stylesheet" href="css/global.css?v=10"><title>Comment</title></head>
<body>
<header class="header"><button class="icon-btn" onclick="toggleSidebar()">‚ò∞</button><h1 class="title">Comment feedback</h1><a class="icon-btn" href="leaderboard.html">üèÜ</a></header>
<aside class="sidebar"><div class="brand"><img src="assets/icons/pwa-192.png"><strong>Stroke Card Adventure</strong></div>
  <nav class="menu">
    <a id="m-play" href="play.html">Play</a><a id="m-cards" href="my-cards.html">My cards</a><a id="m-mission" href="mission.html">Mission</a>
    <a id="m-gacha" href="gacha.html">Gacha</a><a id="m-profile" href="profile.html">Profile</a><a id="m-comment" class="active" href="comment.html">Comment</a>
  </nav><button class="btn" onclick="logout()">Logout</button></aside>
<div class="backdrop" onclick="toggleSidebar()"></div>

<main class="content">
  <textarea id="fb" rows="6" placeholder="Put comment feedback"></textarea>
  <label><input id="ig" type="checkbox"> IG</label>
  <label><input id="fbk" type="checkbox"> Facebook</label>
  <button class="btn primary" id="send">Send</button>
</main>

<script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>
<script src="js/firebase.js"></script><script src="js/ui.js"></script><script src="js/cards.js"></script>
<script>
requireAuth().then(()=>{
  document.getElementById('send').onclick = async ()=>{
    const text=fb.value.trim(); if(!text) return toast('Write something');
    await userRef().collection('comments').add({text, ig:ig.checked, fb:fbk.checked, at: firebase.firestore.FieldValue.serverTimestamp()});
    fb.value=''; toast('Thanks!');
  };
});
</script>
</body></html>
